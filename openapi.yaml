{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:9001","description":"Generated server url"}],"tags":[{"name":"Ingredient","description":"Ingredient operations"},{"name":"Auto","description":"Auto IA controller (beta)"},{"name":"Role","description":"Role operations"},{"name":"User","description":"User operations"},{"name":"Comment","description":"Comment operations"},{"name":"Recipe Picture","description":"Recipe Picture operations"},{"name":"Recipe","description":"Recipe operations"},{"name":"Auth","description":"Authentication operations"}],"paths":{"/api/users/details":{"get":{"tags":["User"],"summary":"Get my user details","operationId":"getMyUserDetails","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDetailResponse"}}}}}},"put":{"tags":["User"],"summary":"Update user details (first name, last name)","operationId":"updateUserDetails","parameters":[{"name":"username","in":"query","description":"The username of the user"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDetailResponse"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDetailResponse"}}}}}}},"/api/recipes/{recipeId}":{"put":{"tags":["Recipe"],"summary":"Update a recipe","operationId":"updateRecipe","parameters":[{"name":"recipeId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"query","description":"The id of the recipe"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RecipeResponse"}}}}}},"delete":{"tags":["Recipe"],"summary":"Delete a recipe","operationId":"deleteRecipe","parameters":[{"name":"recipeId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"query","description":"The id of the recipe"}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/api/ingredients/recipes/{recipeId}":{"get":{"tags":["Ingredient"],"summary":"Get all ingredients","operationId":"getIngredientsByRecipeId","parameters":[{"name":"recipeId","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/IngredientResponse"}}}}}}},"put":{"tags":["Ingredient"],"summary":"Add or update a new ingredient to a recipe","operationId":"addIngredient","parameters":[{"name":"recipeId","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngredientRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/IngredientResponse"}}}}}}},"/api/comments/{commentId}":{"put":{"tags":["Comment"],"summary":"Update a comment","operationId":"updateComment","parameters":[{"name":"commentId","in":"path","description":"The id of the comment","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}}}},"delete":{"tags":["Comment"],"summary":"Delete a comment","operationId":"deleteComment","parameters":[{"name":"commentId","in":"path","description":"The id of the comment","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/users/favorites-recipes/{recipeId}":{"post":{"tags":["User"],"summary":"add recipe to user favorites recipes","operationId":"addRecipeToFavorites","parameters":[{"name":"recipeId","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"delete":{"tags":["User"],"summary":"delete recipe from user favorites recipes","operationId":"deleteRecipeFromFavorites","parameters":[{"name":"recipeId","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/api/roles/{roleName}/users/{username}":{"post":{"tags":["Role"],"summary":"Add role to user (need ADMIN role)","operationId":"addRoleToUser","parameters":[{"name":"roleName","in":"path","description":"The name of the role","required":true,"schema":{"type":"string"}},{"name":"username","in":"path","description":"The username of the user","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"delete":{"tags":["Role"],"summary":"Remove role from user (need ADMIN role)","operationId":"removeRoleFromUser","parameters":[{"name":"roleName","in":"path","description":"The name of the role","required":true,"schema":{"type":"string"}},{"name":"username","in":"path","description":"The username of the user","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/api/recipes":{"get":{"tags":["Recipe"],"summary":"Get all recipes","operationId":"getRecipes_1","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipeResponse"}}}}}}},"post":{"tags":["Recipe"],"summary":"Create a recipe","operationId":"createRecipe","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RecipeResponse"}}}}}}},"/api/pictures/recipes/{recipeId}":{"get":{"tags":["Recipe Picture"],"summary":"Get pictures for a recipe","operationId":"getRecipePictures","parameters":[{"name":"recipeId","in":"path","description":"Id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipePictureResponse"}}}}}}},"post":{"tags":["Recipe Picture"],"summary":"Upload a picture for a recipe","operationId":"uploadFile","parameters":[{"name":"recipeId","in":"path","description":"Id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"required":["file"],"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RecipePictureResponse"}}}}}}},"/api/comments/recipes/{recipeId}":{"get":{"tags":["Comment"],"summary":"Get all comments of a recipe","operationId":"getCommentsByRecipeId","parameters":[{"name":"recipeId","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponse"}}}}}}},"post":{"tags":["Comment"],"summary":"Create a comment for a recipe","operationId":"createComment","parameters":[{"name":"recipeId","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}}}}},"/api/auto/generate-recipe":{"post":{"tags":["Auto"],"summary":"Upload a picture of a recipe and get the RecipeResponse","operationId":"generateRecipeEntityWithPicture","parameters":[{"name":"file","in":"query","description":"picture of "}],"requestBody":{"content":{"application/json":{"schema":{"required":["file"],"type":"object","properties":{"file":{"type":"string","description":"picture of ","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/signup":{"post":{"tags":["Auth"],"summary":"Register a new user","operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/auth/signout":{"post":{"tags":["Auth"],"summary":"Sign out a user","operationId":"logoutUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/api/auth/signin":{"post":{"tags":["Auth"],"summary":"Authenticate a user","operationId":"authenticateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/users/{username}":{"get":{"tags":["User"],"summary":"Get user by username","operationId":"getUserByUsername","parameters":[{"name":"username","in":"path","description":"The username of the user","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/users/{username}/recipes":{"get":{"tags":["User"],"summary":"Get user recipes with username","operationId":"getRecipesByUsername","parameters":[{"name":"username","in":"path","description":"The username of the user","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipeResponse"}}}}}}}},"/api/users/{username}/details":{"get":{"tags":["User"],"summary":"Get user details (need ADMIN role)","operationId":"getUserDetails","parameters":[{"name":"username","in":"path","description":"The username of the user","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDetailResponse"}}}}}}},"/api/users/recipes":{"get":{"tags":["User"],"summary":"Get my recipes","operationId":"getRecipes","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipeResponse"}}}}}}}},"/api/users/favorites-recipes":{"get":{"tags":["User"],"summary":"Get user favorite recipes","operationId":"getFavoriteRecipes","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipeResponse"}}}}}}}},"/api/roles/users":{"get":{"tags":["Role"],"summary":"Get my roles","operationId":"getAllRolesByUserId","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"}}}}}}}},"/api/roles/users/{username}":{"get":{"tags":["Role"],"summary":"Get roles by username (need ADMIN role)","operationId":"getRolesByUsername","parameters":[{"name":"username","in":"path","description":"The username of the user","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"}}}}}}}},"/api/roles/all":{"get":{"tags":["Role"],"summary":"Get all roles","operationId":"getAllRoles","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"}}}}}}}},"/api/recipes/{recipeId}/steps":{"get":{"tags":["Recipe"],"summary":"Get all steps of a recipe","operationId":"getStepsByRecipeId","parameters":[{"name":"recipeId","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipeStepResponse"}}}}}}}},"/api/recipes/{id}":{"get":{"tags":["Recipe"],"summary":"Get a recipe detail by id","operationId":"getRecipeById","parameters":[{"name":"id","in":"path","description":"The id of the recipe","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RecipeDetailResponse"}}}}}}},"/api/recipes/ingredients/search":{"get":{"tags":["Recipe"],"summary":"Get all recipes with at most one of the given ingredients","operationId":"getRecipesByIngredients","parameters":[{"name":"ingredients","in":"query","description":"The ingredients to search for","required":true,"schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipeResponse"}}}}}}}},"/api/pictures/{filename}":{"get":{"tags":["Recipe Picture"],"summary":"Download a picture","operationId":"getFile","parameters":[{"name":"filename","in":"path","description":"Name of the picture","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}},"delete":{"tags":["Recipe Picture"],"summary":"Delete a picture","operationId":"deleteFile","parameters":[{"name":"filename","in":"path","description":"Name of the picture","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/api/comments/users/{username}":{"get":{"tags":["Comment"],"summary":"Get all comments by user","operationId":"getCommentsByUserId","parameters":[{"name":"username","in":"path","description":"The username of the user","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponse"}}}}}}}},"/api/auth/me":{"get":{"tags":["Auth"],"summary":"Get the current user","operationId":"getCurrentUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDetailResponse"}}}}}}},"/api/ingredients/recipes/{recipeId}/{ingredientName}":{"delete":{"tags":["Ingredient"],"summary":"Delete an ingredient from a recipe","operationId":"deleteIngredient","parameters":[{"name":"ingredientName","in":"path","description":"The name of the ingredient","required":true,"schema":{"type":"string"}},{"name":"recipeId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"UserDetailResponse":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"username":{"type":"string"},"email":{"type":"string"}}},"IngredientRequest":{"type":"object","properties":{"name":{"type":"string"},"quantity":{"type":"number","format":"float"},"unit":{"type":"string","enum":["GRAM","MILLILITER","TEASPOON","TABLESPOON","CUP","PIECE"]}}},"RecipeRequest":{"type":"object","properties":{"name":{"type":"string"},"time":{"type":"integer","format":"int64"},"portions":{"type":"integer","format":"int64"},"season":{"type":"string","enum":["SPRING","SUMMER","AUTUMN","WINTER","ALL"]},"type":{"type":"string","enum":["ENTREE","PLAT","DESSERT"]},"steps":{"type":"array","items":{"type":"string"}},"ingredients":{"type":"array","items":{"$ref":"#/components/schemas/IngredientRequest"}}}},"RecipePictureResponse":{"type":"object","properties":{"imageUrl":{"type":"string"}}},"RecipeResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"time":{"type":"integer","format":"int64"},"portions":{"type":"integer","format":"int64"},"season":{"type":"string","enum":["SPRING","SUMMER","AUTUMN","WINTER","ALL"]},"type":{"type":"string","enum":["ENTREE","PLAT","DESSERT"]},"user":{"$ref":"#/components/schemas/UserResponse"},"createdAt":{"type":"string","format":"date-time"},"steps":{"type":"array","items":{"$ref":"#/components/schemas/RecipeStepResponse"}},"pictures":{"type":"array","items":{"$ref":"#/components/schemas/RecipePictureResponse"}}}},"RecipeStepResponse":{"type":"object","properties":{"stepNumber":{"type":"integer","format":"int64"},"text":{"type":"string"}}},"UserResponse":{"type":"object","properties":{"username":{"type":"string"}}},"IngredientResponse":{"type":"object","properties":{"name":{"type":"string"},"quantity":{"type":"number","format":"float"},"unit":{"type":"string","enum":["GRAM","MILLILITER","TEASPOON","TABLESPOON","CUP","PIECE"]}}},"CommentRequest":{"type":"object","properties":{"text":{"type":"string"}}},"CommentResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"recipeId":{"type":"integer","format":"int64"},"text":{"type":"string"},"user":{"$ref":"#/components/schemas/UserResponse"},"createdAt":{"type":"string","format":"date-time"}}},"MessageResponse":{"type":"object","properties":{"message":{"type":"string"}}},"SignupRequest":{"required":["email","password","username"],"type":"object","properties":{"username":{"maxLength":20,"minLength":3,"type":"string"},"email":{"maxLength":50,"minLength":0,"type":"string"},"password":{"maxLength":40,"minLength":6,"type":"string"}}},"LoginRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"RoleResponse":{"type":"object","properties":{"role":{"type":"string"}}},"RecipeDetailResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"time":{"type":"integer","format":"int64"},"portions":{"type":"integer","format":"int64"},"season":{"type":"string","enum":["SPRING","SUMMER","AUTUMN","WINTER","ALL"]},"type":{"type":"string","enum":["ENTREE","PLAT","DESSERT"]},"user":{"$ref":"#/components/schemas/UserResponse"},"createdAt":{"type":"string","format":"date-time"},"steps":{"type":"array","items":{"$ref":"#/components/schemas/RecipeStepResponse"}},"pictures":{"type":"array","items":{"$ref":"#/components/schemas/RecipePictureResponse"}},"ingredients":{"type":"array","items":{"$ref":"#/components/schemas/IngredientResponse"}},"comments":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponse"}}}}}}}